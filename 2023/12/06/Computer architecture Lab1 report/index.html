<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Computer architecture Lab1 | dd's Blog</title><meta name="author" content="dd"><meta name="copyright" content="dd"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Computer architectureLab1 题单https:&#x2F;&#x2F;www.ida.liu.se&#x2F;~TDTS10&#x2F;labs&#x2F;lab1.shtml 123456789101112131415161718192021222324252627282930313233343536a. The 16-bit memory address is divided into tag, line number,">
<meta property="og:type" content="article">
<meta property="og:title" content="Computer architecture Lab1">
<meta property="og:url" content="https://mmmaiiii.github.io/ddblog/2023/12/06/Computer%20architecture%20Lab1%20report/index.html">
<meta property="og:site_name" content="dd&#39;s Blog">
<meta property="og:description" content="Computer architectureLab1 题单https:&#x2F;&#x2F;www.ida.liu.se&#x2F;~TDTS10&#x2F;labs&#x2F;lab1.shtml 123456789101112131415161718192021222324252627282930313233343536a. The 16-bit memory address is divided into tag, line number,">
<meta property="og:locale">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:published_time" content="2023-12-06T09:09:33.000Z">
<meta property="article:modified_time" content="2023-12-07T20:03:10.208Z">
<meta property="article:author" content="dd">
<meta property="article:tag" content="Computer architecture">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/ddblog/img/favicon.png"><link rel="canonical" href="https://mmmaiiii.github.io/ddblog/2023/12/06/Computer%20architecture%20Lab1%20report/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/ddblog/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/ddblog/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Computer architecture Lab1',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-07 21:03:10'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/ddblog/archives/"><div class="headline">Articles</div><div class="length-num">3</div></a><a href="/ddblog/tags/"><div class="headline">Tags</div><div class="length-num">4</div></a><a href="/ddblog/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><hr class="custom-hr"/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/ddblog/" title="dd's Blog"><span class="site-name">dd's Blog</span></a></span><div id="menus"><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Computer architecture Lab1</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-12-06T09:09:33.000Z" title="Created 2023-12-06 10:09:33">2023-12-06</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-12-07T20:03:10.208Z" title="Updated 2023-12-07 21:03:10">2023-12-07</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Computer architecture Lab1"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="Computer-architecture"><a href="#Computer-architecture" class="headerlink" title="Computer architecture"></a>Computer architecture</h2><p>Lab1 题单<br><a target="_blank" rel="noopener" href="https://www.ida.liu.se/~TDTS10/labs/lab1.shtml">https://www.ida.liu.se/~TDTS10/labs/lab1.shtml</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">a. The 16-bit memory address is divided into tag, line number, and byte number as follows:</span><br><span class="line">   - Byte Number: 3 bits (2^3 = 8 bytes per block, so 3 bits are needed)</span><br><span class="line">   - Line Number: 5 bits (32 lines in the cache, so 5 bits are needed)</span><br><span class="line">   - Tag: Remaining bits (16 - 3 - 5 = 8 bits for the tag)</span><br><span class="line"></span><br><span class="line">b. To find the line number, we use the middle 5 bits of the address:</span><br><span class="line">   - 0001 0001 0001 1011: Line Number = 00011 (Decimal: 3)</span><br><span class="line">   - 1100 0011 0011 0100: Line Number = 11000 (Decimal: 24)</span><br><span class="line">   - 1101 0000 0001 1101: Line Number = 10100 (Decimal: 20)</span><br><span class="line">   - 1010 1010 1010 1010: Line Number = 01010 (Decimal: 10)</span><br><span class="line"></span><br><span class="line">c. If the byte with address 0001 1010 0001 1010 is stored in the cache, the addresses of the other bytes stored with it within the same block (line) would be:</span><br><span class="line">   - 0001 1010 0001 1000</span><br><span class="line">   - 0001 1010 0001 1001</span><br><span class="line">   - 0001 1010 0001 1011</span><br><span class="line">   - 0001 1010 0001 1100</span><br><span class="line">   - 0001 1010 0001 1101</span><br><span class="line">   - 0001 1010 0001 1110</span><br><span class="line">   - 0001 1010 0001 1111</span><br><span class="line"></span><br><span class="line">d. The total number of bytes of memory that can be stored in the cache is calculated by multiplying the number of lines by the block size:</span><br><span class="line">   Total bytes = Number of lines × Block size</span><br><span class="line">   Total bytes = 32 lines × 8 bytes/line</span><br><span class="line">   Total bytes = 256 bytes</span><br><span class="line"></span><br><span class="line">e. The tag is stored in the cache to identify which block of memory a particular cache line corresponds to. It helps in determining whether the data in a cache line is the data needed or if a cache miss has occurred, requiring fetching the data from the main memory.</span><br><span class="line"></span><br><span class="line">f. For a 2-way set-associative cache with 32 sets and a line size of 8 bytes:</span><br><span class="line">   - Index bits needed = log2(Number of Sets) = log2(32) = 5 bits</span><br><span class="line">   - Byte offset bits = log2(Line size) = log2(8) = 3 bits</span><br><span class="line"></span><br><span class="line">For array element a[2]:</span><br><span class="line">   - Index = a[2] / Line size = 2 / 8 = 0 (set number)</span><br><span class="line">   </span><br><span class="line">For array element a[64]:</span><br><span class="line">   - Index = a[64] / Line size = 64 / 8 = 8 (set number)</span><br></pre></td></tr></table></figure>

<h5 id="cache1-cfg"><a href="#cache1-cfg" class="headerlink" title="cache1.cfg"></a>cache1.cfg</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># l1 data cache config, i.e., &#123;&lt;config&gt;|none&#125;</span><br><span class="line"># &lt;config&gt; ::= &lt;name&gt;:&lt;nsets&gt;:&lt;bsize&gt;:&lt;assoc&gt;:&lt;repl&gt;</span><br><span class="line"># nsets = number of sets</span><br><span class="line"># bsize = line size in bytes</span><br><span class="line"># assoc = associativity</span><br><span class="line"># repl  = replacement algorithm (l, r, f)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-cache:dl1	dl1:1024:16:1:l</span><br></pre></td></tr></table></figure>

<h5 id="cache2-cfg"><a href="#cache2-cfg" class="headerlink" title="cache2.cfg"></a>cache2.cfg</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-cache:dl1	dl1:1024:8:2:l</span><br></pre></td></tr></table></figure>

<h5 id="test1-c"><a href="#test1-c" class="headerlink" title="test1.c"></a>test1.c</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> TAB_SIZE        1048576   <span class="comment">/*  1 MB */</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CACHE_SIZE	  16384   <span class="comment">/* 16 kB */</span></span></span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; TAB_SIZE; i++) &#123;</span><br><span class="line">	<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;</span><br><span class="line">	    sum += A[i];</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="test2-c"><a href="#test2-c" class="headerlink" title="test2.c"></a>test2.c</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; TAB_SIZE - CACHE_SIZE; i++) &#123;</span><br><span class="line">	<span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;c</span><br><span class="line">	    sum += A[i];</span><br><span class="line">	    sum += A[i+CACHE_SIZE]; <span class="comment">// 存储到跟A[i]在cache上相同的位置？</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">c1:			t1:0.0091, t2:0.1577					c2:		 t1:0.0177  t2:0.0235</span><br><span class="line">1 	 ----											1	 -- --</span><br><span class="line">2 	 ----											2    -- -- </span><br><span class="line">..													..</span><br><span class="line">1024 ---- # 一次load 一整个cache line				 1024 -- -- # 2-way set </span><br><span class="line"></span><br><span class="line">t1:													t2:</span><br><span class="line">0------..--------TAB_SIZE	 						0----CACHE_SIZE----TAB_SIZE</span><br></pre></td></tr></table></figure>

<h3 id="Source-Code-Locality-Analysis"><a href="#Source-Code-Locality-Analysis" class="headerlink" title="Source Code Locality Analysis:"></a>Source Code Locality Analysis:</h3><ol>
<li><strong>Test1.c:</strong><ul>
<li>15-17, 22-26. 29-33: this loop iterates over array <code>A</code> and exhibits both temporal locality and spacial locality as it accesses elements in a sequential manner.  And variable <code>i</code> and <code>j</code> exhibits temporal locality</li>
</ul>
</li>
<li><strong>Test2.c:</strong><ul>
<li>22-27: array <code>A</code> exhibits both temporal locality and worse spacial locality compared to test1.c , And variable <code>i</code> and <code>j</code> exhibits temporal locality.</li>
</ul>
</li>
</ol>
<h3 id="Cache-Access-Analysis-Without-Simulation"><a href="#Cache-Access-Analysis-Without-Simulation" class="headerlink" title="Cache Access Analysis (Without Simulation):"></a>Cache Access Analysis (Without Simulation):</h3><p>analyze potential cache hits and misses based on the characteristics of the code and the cache configurations.</p>
<ol>
<li><p><strong>Test1.c:</strong></p>
<ul>
<li><p><strong>Cache1.cfg:</strong></p>
<ul>
<li>With a larger, <code>direct-mapped L1 </code> (<code>dl1:1024 :16:1:l</code>), there may be improved cache hit rates for <code>Test2.c</code>, especially if the access pattern aligns well with the larger cache lines and associativity.</li>
<li>Simulation: Actual miss rate is 0.0091, aligning with the prediction.</li>
</ul>
</li>
<li><p><strong>Cache2.cfg:</strong></p>
<ul>
<li>Due to its smaller, <code>2-way set associative L1 cache (</code>dl1:1024:8:2:l), <code>Test2.c</code> might experience a lower cache miss rate because the loop at lines 22-26 benefit from the limited cache size. Sequential access may benefit from temporal locality, but the cache’s small size could lead to more frequent evictions.</li>
<li>Simulation: Actual miss rate is 0.0177, in line with the prediction.</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Test2.c:</strong></p>
<ul>
<li><p><strong>Cache1.cfg:</strong></p>
<ul>
<li>The bigger cache in <code>cache1.cfg</code> may lead to more frequent cache misses. The program accesses 2 blocks that map to the same cache slot repeatedly, cache miss rate will be very high. The poor spatial locality let the larger cache sizes may contribute to fewer cache misses.</li>
<li>Simulation: Actual miss rate is 0.1577, consistent with the prediction.</li>
</ul>
</li>
<li><p><strong>Cache2.cfg:</strong></p>
<ul>
<li><code>Test2.c</code> might benefit from the smaller cache in <code>cache2.cfg</code> due to potentially better accommodating the set of data in the nested loop (lines 22-27). The smaller cache sizes may contribute to fewer cache misses.</li>
<li>Simulation: Actual miss rate is 0.0235, aligning with the prediction.</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="Predicted-Best-and-Worst-Miss-Ratios"><a href="#Predicted-Best-and-Worst-Miss-Ratios" class="headerlink" title="Predicted Best and Worst Miss Ratios:"></a>Predicted Best and Worst Miss Ratios:</h3><ul>
<li><strong>Best Combination:</strong> Test1.c with cache1.cfg might perform well due to the larger cache size and associativity, potentially mitigating the impact of the sequential access pattern.</li>
<li><strong>Worst Combination:</strong> Test2.c with cache1.cfg could face challenges due to the larger cache size potentially leading to more cache misses, because of the array access pattern with bad spacial locality.</li>
</ul>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary:"></a>Summary:</h3><p>The simulation results generally align with the predictions. <code>Test1.c</code> performs better with Cache1.cfg, as expected, while <code>Test2.c</code> exhibits higher miss rates, especially with <code>Cache1.cfg</code>. </p>
<h2 id="Evaluation-of-cache-configurations"><a href="#Evaluation-of-cache-configurations" class="headerlink" title="Evaluation of cache configurations"></a><strong>Evaluation of cache configurations</strong></h2><ol>
<li><h3 id="Simulation-Results"><a href="#Simulation-Results" class="headerlink" title="Simulation Results"></a><strong>Simulation Results</strong></h3><h4 id="data-output"><a href="#data-output" class="headerlink" title="data output:"></a>data output:</h4><img src="C:\Users\23606\AppData\Roaming\Typora\typora-user-images\image-20231206120021690.png" alt="image-20231206120021690" style="zoom:50%;" />

<h4 id="inst-output"><a href="#inst-output" class="headerlink" title="inst output:"></a>inst output:</h4><img src="C:\Users\23606\AppData\Roaming\Typora\typora-user-images\image-20231206120124809.png" alt="image-20231206120124809" style="zoom:50%;" />

<h4 id="unified-output"><a href="#unified-output" class="headerlink" title="unified output:"></a>unified output:</h4><img src="C:\Users\23606\AppData\Roaming\Typora\typora-user-images\image-20231206120154369.png" alt="image-20231206120154369" style="zoom:50%;" />


</li>
<li><h3 id="Analysis-of-Miss-Ratio-and-Associativity"><a href="#Analysis-of-Miss-Ratio-and-Associativity" class="headerlink" title="Analysis of Miss Ratio and Associativity"></a><strong>Analysis of Miss Ratio and Associativity</strong></h3><ul>
<li>For each number of sets, as you move from <strong>associativity 1 to 8</strong>, there is a consistent trend of <strong>decreasing</strong> miss ratios. Higher associativity allows the cache to store more lines, reducing the likelihood of cache misses.</li>
<li>For each associativity level, as you move from <strong>fewer to more sets</strong>, there is a general trend of <strong>decreasing</strong> miss ratios, A larger number of sets provides more opportunities for the cache to store different lines, reducing contention and cache misses.</li>
</ul>
</li>
<li><h3 id="Cache-Variant-Selection"><a href="#Cache-Variant-Selection" class="headerlink" title="Cache Variant Selection"></a><strong>Cache Variant Selection</strong></h3><ul>
<li>Considering that <code>go.ss</code> has almost the same number of instruction and data accesses, and assuming we can afford only one cache, a unified cache might be a reasonable choice.</li>
<li>The unified cache could provide a balanced approach and minimize overall miss ratios.</li>
</ul>
</li>
<li><h3 id="Optimal-Instruction-Cache-Configuration"><a href="#Optimal-Instruction-Cache-Configuration" class="headerlink" title="Optimal Instruction Cache Configuration"></a><strong>Optimal Instruction Cache Configuration</strong></h3><ul>
<li>Optimal Cache Configuration:<br><strong>Associativity: 2</strong><br><strong>Number of Sets: 128</strong><br><strong>Cost: 466.12</strong></li>
</ul>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>];</span><br><span class="line">n = [<span class="number">128</span>, <span class="number">256</span>, <span class="number">512</span>, <span class="number">1024</span>, <span class="number">2048</span>, <span class="number">4096</span>];</span><br><span class="line">m = [</span><br><span class="line">    <span class="number">0.008648</span>, <span class="number">0.003842</span>, <span class="number">0.003686</span>, <span class="number">0.003644</span>, <span class="number">0.003618</span>, <span class="number">0.003564</span>, <span class="number">0.003505</span>, <span class="number">0.003436</span>;</span><br><span class="line">    <span class="number">0.003939</span>, <span class="number">0.003646</span>, <span class="number">0.003509</span>, <span class="number">0.003352</span>, <span class="number">0.003104</span>, <span class="number">0.002702</span>, <span class="number">0.002346</span>, <span class="number">0.002117</span>;</span><br><span class="line">    <span class="number">0.003646</span>, <span class="number">0.003255</span>, <span class="number">0.002726</span>, <span class="number">0.002333</span>, <span class="number">0.002055</span>, <span class="number">0.001915</span>, <span class="number">0.001836</span>, <span class="number">0.001809</span>;</span><br><span class="line">    <span class="number">0.003282</span>, <span class="number">0.002568</span>, <span class="number">0.002066</span>, <span class="number">0.001862</span>, <span class="number">0.001805</span>, <span class="number">0.001802</span>, <span class="number">0.001800</span>, <span class="number">0.001799</span>;</span><br><span class="line">    <span class="number">0.002714</span>, <span class="number">0.001987</span>, <span class="number">0.001811</span>, <span class="number">0.001801</span>, <span class="number">0.001799</span>, <span class="number">0.001799</span>, <span class="number">0.001799</span>, <span class="number">0.001799</span>;</span><br><span class="line">    <span class="number">0.002246</span>, <span class="number">0.001832</span>, <span class="number">0.001799</span>, <span class="number">0.001799</span>, <span class="number">0.001799</span>, <span class="number">0.001799</span>, <span class="number">0.001799</span>, <span class="number">0.001799</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">b = <span class="number">8000</span>;</span><br><span class="line">c = <span class="number">0.01</span>;</span><br><span class="line">mB = b / c;</span><br><span class="line">oC = [];</span><br><span class="line">mC = Inf;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="built_in">length</span>(n)</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:<span class="number">8</span></span><br><span class="line">        sB = n(<span class="built_in">i</span>) * <span class="built_in">j</span> * <span class="number">32</span>; </span><br><span class="line">        </span><br><span class="line">        cF = (<span class="number">100000</span> * m(<span class="built_in">i</span>, <span class="built_in">j</span>)) + (<span class="number">0.01</span> * sB);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">% disp(cF);</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> cF &lt;= b &amp;&amp; cF &lt; mC</span><br><span class="line">            mC = cF;</span><br><span class="line">            oC = [<span class="built_in">j</span>, n(<span class="built_in">i</span>)];</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">disp</span>(<span class="string">&#x27;Optimal Cache Configuration:&#x27;</span>);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;Associativity: &#x27;</span> num2str(oC(<span class="number">1</span>))]);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;Number of Sets: &#x27;</span> num2str(oC(<span class="number">2</span>))]);</span><br><span class="line"><span class="built_in">disp</span>([<span class="string">&#x27;Cost: &#x27;</span> num2str(mC)]);</span><br></pre></td></tr></table></figure></li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://mmmaiiii.github.io/ddblog">dd</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://mmmaiiii.github.io/ddblog/2023/12/06/Computer%20architecture%20Lab1%20report/">https://mmmaiiii.github.io/ddblog/2023/12/06/Computer%20architecture%20Lab1%20report/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/ddblog/tags/Computer-architecture/">Computer architecture</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/ddblog/2023/12/06/6-006-good-solutions/" title="6.006 good solutions"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Previous</div><div class="prev_info">6.006 good solutions</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/ddblog/2023/12/07/Computer%20architecture%20Lab2/" title="Computer architecture Lab2"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-12-07</div><div class="title">Computer architecture Lab2</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/ddblog/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">dd</div><div class="author-info__description">CS study route track</div></div><div class="card-info-data site-data is-center"><a href="/ddblog/archives/"><div class="headline">Articles</div><div class="length-num">3</div></a><a href="/ddblog/tags/"><div class="headline">Tags</div><div class="length-num">4</div></a><a href="/ddblog/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Computer-architecture"><span class="toc-number">1.</span> <span class="toc-text">Computer architecture</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#cache1-cfg"><span class="toc-number">1.0.0.1.</span> <span class="toc-text">cache1.cfg</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cache2-cfg"><span class="toc-number">1.0.0.2.</span> <span class="toc-text">cache2.cfg</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#test1-c"><span class="toc-number">1.0.0.3.</span> <span class="toc-text">test1.c</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#test2-c"><span class="toc-number">1.0.0.4.</span> <span class="toc-text">test2.c</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Source-Code-Locality-Analysis"><span class="toc-number">1.1.</span> <span class="toc-text">Source Code Locality Analysis:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cache-Access-Analysis-Without-Simulation"><span class="toc-number">1.2.</span> <span class="toc-text">Cache Access Analysis (Without Simulation):</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Predicted-Best-and-Worst-Miss-Ratios"><span class="toc-number">1.3.</span> <span class="toc-text">Predicted Best and Worst Miss Ratios:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Summary"><span class="toc-number">1.4.</span> <span class="toc-text">Summary:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Evaluation-of-cache-configurations"><span class="toc-number">2.</span> <span class="toc-text">Evaluation of cache configurations</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Simulation-Results"><span class="toc-number">2.1.</span> <span class="toc-text">Simulation Results</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#data-output"><span class="toc-number">2.1.1.</span> <span class="toc-text">data output:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#inst-output"><span class="toc-number">2.1.2.</span> <span class="toc-text">inst output:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#unified-output"><span class="toc-number">2.1.3.</span> <span class="toc-text">unified output:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Analysis-of-Miss-Ratio-and-Associativity"><span class="toc-number">2.2.</span> <span class="toc-text">Analysis of Miss Ratio and Associativity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cache-Variant-Selection"><span class="toc-number">2.3.</span> <span class="toc-text">Cache Variant Selection</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Optimal-Instruction-Cache-Configuration"><span class="toc-number">2.4.</span> <span class="toc-text">Optimal Instruction Cache Configuration</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/ddblog/2023/12/07/Computer%20architecture%20Lab2/" title="Computer architecture Lab2">Computer architecture Lab2</a><time datetime="2023-12-07T10:52:51.000Z" title="Created 2023-12-07 11:52:51">2023-12-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/ddblog/2023/12/06/6-006-good-solutions/" title="6.006 good solutions">6.006 good solutions</a><time datetime="2023-12-06T18:31:21.000Z" title="Created 2023-12-06 19:31:21">2023-12-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/ddblog/2023/12/06/Computer%20architecture%20Lab1%20report/" title="Computer architecture Lab1">Computer architecture Lab1</a><time datetime="2023-12-06T09:09:33.000Z" title="Created 2023-12-06 10:09:33">2023-12-06</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By dd</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/ddblog/js/utils.js"></script><script src="/ddblog/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>